import*as t from"d3";var e={813:(t,e,a)=>{a.d(e,{Q:()=>g,l:()=>c});var i=a(507);i.timeFormat(".%L"),i.timeFormat(":%S");const s=i.timeFormat("%I:%M"),n=i.timeFormat("%I %p"),o=i.timeFormat("%a %d"),l=i.timeFormat("%b %d"),r=i.timeFormat("%B %Y"),c=(i.timeFormat("%Y"),(t,e="temp:1D",a)=>{const c=i.timeParse("%s"),g=e.split(":")[1],m=+t;if(isNaN(m)||m<0||m>=a.length)return null;const d=c(a[m]);let x;switch(g){case"1m":case"3m":case"5m":case"15m":case"30m":case"45m":x=s;break;case"1H":case"2H":case"4H":x=n;break;case"1D":x=o;break;case"1W":x=l;break;case"1M":x=r;break;default:x=()=>""}return x(d)}),g=t=>{const e=+t;return e>=1e6?(e/1e6).toFixed(0)+"M":e>=1e3?(e/1e3).toFixed(0)+"k":e.toString()}},126:(t,e,a)=>{a.d(e,{Aw:()=>m,Gi:()=>n,YC:()=>g,Yh:()=>r,dO:()=>o,j1:()=>p,jx:()=>l,rk:()=>u,wy:()=>h});var i=a(507),s=a(625);let n=s.O1,o=s.xZ,l={},r={},c={},g={},m={plotName:new Set,xscaleTag:new Set,yscaleTag:new Set,yaxisTag:new Set};function d(){let t=[];if(this.xsaleType="Linear"){const e=n[this.xscaleDataTag].length;t=i.extent([0,e])}else t=i.extent(n[this.xscaleDataTag]);const e="Linear"==this.xsaleType?i.scaleLinear().range(this.xscaleRange).domain(t):"TimeScale"===this.xsaleType?i.scaleTime().range(this.xscaleRange).domain(t):i.scaleBand().range(this.xscaleRange).domain(t.map((t=>t.toString())));return{domain:t,XSCALE:e}}function x(){let t=[],e=null,a=null,s=[];if("ohlc"==this.yscaleDataTag)s=0==this.xscaleVisibleRange[1]?[0,n.low.length]:this.xscaleVisibleRange,t=[i.min(n.low.slice(s[0],s[1])),i.max(n.high.slice(s[0],s[1]))];else if("fundaMultibarY"==this.yscaleDataTag){const e=Object.values(n[this.yscaleDataTag]),a=[].concat(...e);s=0==this.xscaleVisibleRange[1]?[0,e[0].length]:this.xscaleVisibleRange,t=[i.min(a.slice(s[0],s[1])),i.max(a.slice(s[0],s[1]))]}else if("rsi"==this.yscaleDataTag){const e=Object.values(n[this.yscaleDataTag]),a=[].concat(...e);s=0==this.xscaleVisibleRange[1]?[0,e[0].length]:this.xscaleVisibleRange,t=[i.min(a.slice(s[0],s[1])),i.max(a.slice(s[0],s[1]))],t=[0,100]}else s=0==this.xscaleVisibleRange[1]?[0,n[this.yscaleDataTag].length]:this.xscaleVisibleRange,t=i.extent(n[this.yscaleDataTag].slice(s[0],s[1]));const o=Array.from(t),l=.1*(o[1]-o[0]),r=[o[0]-l,o[1]+l];if(null!=this.yaxisrange&&(e=i.scaleLinear().range(this.yaxisrange).domain(r),a=this.yzoomtransform.rescaleY(e)),"BR"==this.yscaleTag&&null!=a){let t=[0,a.domain()[1]];a.domain(t)}return{domain:t,YSCALE:e,TranSFormedYscale:a}}function p(t,e){c.hasOwnProperty(t)?c[t]=Object.assign(Object.assign({},c[t]),e):c[t]=Object.assign({plotStatus:!0,plotName:"PlotName",xdata:()=>[],ydata:()=>[],xscaleTag:"Bot1",yscaleTag:"TL",plotType:"line",plotcolor:"red",buttontag:"no-button",buttonSvgIcon:"defaultsvg",tooltip:!1,clipdata:!0},e)}function h(t,e){l.hasOwnProperty(t)?l[t]=Object.assign(Object.assign({},l[t]),e):l[t]=Object.assign({xsaleType:"Linear",xscaleTag:"bot",scaleSide:"Bottom",ticlavelmappedwith:"xindex",ypoint:100,xscaleRange:[0,100],xscaleDataTag:"xindex",zoomstatus:!0,xscale:d},e)}function u(t,e){r.hasOwnProperty(t)?r[t]=Object.assign(Object.assign({},r[t]),e):r[t]=Object.assign({yscaleTag:"bot",yaxisTag:"1main",scaleSide:"Left",xpoint:100,yaxisrange:null,yscaleDataTag:"close",xscaleVisibleRange:[0,10],zoomstatus:!0,autozoom:!0,ydomaindata:[0,0],yscale:x,yzoomtransform:i.zoomIdentity},e)}},628:(t,e,a)=>{a.d(e,{Rg:()=>o,rF:()=>n});var i=a(126);function s(t){const e=new Date(1e3*t);return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${e.getFullYear()}:${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}function n(t,e,a){if(Number.isNaN(e))return;a.selectAll(`.tooliptext-${t}-${this.plotName}`).remove();const n=[0,50,150,80,80,80],o=[{I:{value:e}},{D:{value:s(i.Gi.timestamp[e]),color:"blue"}},{O:{value:i.Gi.open[e].toFixed(2),color:"blue"}},{H:{value:i.Gi.high[e].toFixed(2),color:"green"}},{L:{value:i.Gi.low[e].toFixed(2),color:"red"}},{C:{value:i.Gi.close[e].toFixed(2),color:"blue"}}];let l=0;for(const e of o)for(const i in e)if(e.hasOwnProperty(i)){const s=e[i].value;a.append("text").attr("class",`tooliptext-${t}-${this.plotName}`).attr("x",n.slice(0,l+1).reduce(((t,e)=>t+e),0)).attr("y",10).append("tspan").text(`${i}: ${s}`).attr("fill",e[i].color||"black"),l++}}function o(t,e,a){a.selectAll(`.tooliptext-${t}-${this.plotName}`).remove();const s=[0,40,70,70,70],n=[{V:{value:i.Gi.volume[e],color:"blue"}}];let o=0;for(const e of n)for(const i in e)if(e.hasOwnProperty(i)){const n=e[i].value;a.append("text").attr("class",`tooliptext-${t}-${this.plotName}`).attr("x",s.slice(0,o+1).reduce(((t,e)=>t+e),0)).attr("y",10).append("tspan").text(`${i}: ${n}`).attr("fill",e[i].color||"black"),o++}}},625:(t,e,a)=>{a.d(e,{O1:()=>i,xZ:()=>s});const i={timestamp:[],xindex:[],open:[],high:[],low:[],close:[],volume:[]},s={svgWidth:500,svgHeight:200,targetID:"chartContainer",stockid:"StockName:1D",liveupdatefunction:function(){throw new Error("Function not implemented.")},margin:{top:20,right:50,bottom:20,left:0,innerLeft:0,innerRight:100,innerBottom:20,innerTop:20},get width(){return this.svgWidth-this.margin.left-this.margin.right-this.margin.innerRight-this.margin.innerLeft},get height(){return this.svgHeight-this.margin.top-this.margin.bottom-this.margin.innerTop-this.margin.innerBottom}}},507:(e,a,i)=>{var s,n;e.exports=(s={axisBottom:()=>t.axisBottom,axisLeft:()=>t.axisLeft,axisRight:()=>t.axisRight,axisTop:()=>t.axisTop,extent:()=>t.extent,max:()=>t.max,min:()=>t.min,scaleBand:()=>t.scaleBand,scaleLinear:()=>t.scaleLinear,scaleTime:()=>t.scaleTime,select:()=>t.select,timeFormat:()=>t.timeFormat,timeParse:()=>t.timeParse,zoomIdentity:()=>t.zoomIdentity},n={},i.d(n,s),n)}},a={};function i(t){var s=a[t];if(void 0!==s)return s.exports;var n=a[t]={exports:{}};return e[t](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var s={};(()=>{i.d(s,{$2:()=>x,Pr:()=>l,SA:()=>o,TC:()=>m,Wi:()=>d,v0:()=>r});var t=i(507),e=i(126),a=i(813),n=i(628);function o(){(0,e.wy)("bot",{ypoint:e.dO.svgHeight-e.dO.margin.bottom,xscaleRange:[e.dO.margin.innerLeft+e.dO.margin.left,e.dO.svgWidth-e.dO.margin.right]}),(0,e.wy)("top",{ypoint:e.dO.margin.top,xscaleRange:[e.dO.margin.innerLeft+e.dO.margin.left,e.dO.svgWidth-e.dO.margin.right]}),(0,e.wy)("Funda_xscale",{ypoint:e.dO.svgHeight-e.dO.margin.bottom,xscaleRange:[e.dO.margin.innerLeft+e.dO.margin.left+.15*e.dO.width,e.dO.svgWidth-e.dO.margin.right-.15*+e.dO.width]})}function l(){(0,e.rk)("TR",{xpoint:e.dO.svgWidth-e.dO.margin.right}),(0,e.rk)("TL",{xpoint:e.dO.margin.innerLeft+e.dO.margin.left}),(0,e.rk)("BR",{xpoint:e.dO.svgWidth-e.dO.margin.right}),(0,e.rk)("LR",{xpoint:e.dO.svgWidth-e.dO.margin.right}),(0,e.rk)("Funda_yscale",{xpoint:e.dO.svgWidth-e.dO.margin.right})}function r(){(0,e.j1)("OHLCPlot",{getTooltipHTML:n.rF}),(0,e.j1)("VolumePlot",{getTooltipHTML:n.Rg})}function c(i,s,n){if(null!=i.xscale){const o=i.xscale().XSCALE;let l=i.zoomstatus?s.rescaleX(o):o;n.selectAll(`.x-axis-${i.xscaleTag}`).remove(),n.append("g").attr("class",`axis x-axis x-axis-${i.xscaleTag}`).attr("transform",`translate(0,${i.ypoint})`).call(function(i,s={scaleSide:"Bottom",ticlavelmappedwith:"xindex"}){const n=s.scaleSide||"Bottom",o=s.ticlavelmappedwith||"xindex",l="Top"===n?t.axisTop(i):t.axisBottom(i),[r,c]=t.extent(i.range()),g=Math.ceil((c-r)/100);return l.ticks(g).tickFormat(((t,i)=>t instanceof Date?t.toLocaleDateString():"timestamp"==o?function(t,i,s){return(0,a.l)(t,"temp:1D",e.Gi[s])}(t,0,o):"fundaMappedX1"==o&&e.Gi.fundaMappedX1?e.Gi.fundaMappedX1[+t]:t.toString()))}(l,{scaleSide:i.scaleSide,ticlavelmappedwith:i.ticlavelmappedwith}))}}function g(e,i){if(null!=e.yscale){e.yscale().YSCALE;const s=e.yscale().TranSFormedYscale;i.selectAll(`.y-axis-${e.yscaleTag}`).remove(),i.append("g").attr("class",`axis y-axis y-axis-${e.yscaleTag}`).attr("transform",`translate(${e.xpoint},0)`).call(function(e,i={scaleSide:"Left",yscaleTag:"MAIN"}){const s=i.scaleSide||"Left",n=i.yscaleTag||"MAIN",o="Left"===s?t.axisLeft(e):t.axisRight(e),[l,r]=t.extent(e.range()),c=Math.ceil((r-l)/40);return"BR"==n?o.ticks(c).tickFormat((t=>{return t instanceof Date?t.toLocaleDateString():(e=t,(0,a.Q)(e));var e})):o.ticks(c)}(s,{scaleSide:e.scaleSide,yscaleTag:e.yscaleTag}))}}function m(t,a){t.selectAll(".axis").remove(),Array.from(e.Aw.xscaleTag).map((i=>{c(e.jx[i],a.property("__zoom"),t)})),Array.from(e.Aw.yscaleTag).map((a=>{g(e.Yh[a],t)}))}function d(t,a){t.selectAll(".x-axis").remove(),Array.from(e.Aw.xscaleTag).map((i=>{const s=e.jx[i];if(null!=s.xscale){const n=s.xscale().XSCALE,o=a.property("__zoom");let l=o.rescaleX(n);e.YC[i].map((t=>{const a=l.domain(),i=[0,e.Gi[s.xscaleDataTag].length];"Funda_yscale"!=t&&(0,e.rk)(t,{xscaleVisibleRange:[Math.max(a[0],i[0]),Math.min(a[1],i[1])]})})),c(s,o,t)}}))}function x(a,i,s){const n=Array.from(e.Aw.yscaleTag);if(a.selectAll(".y-axis").each((function(){const e=t.select(this).attr("class").split("y-axis-")[1];n.includes(e)||a.select(`.y-axis-${e}`).remove()})),null==s)n.map((t=>{g(e.Yh[t],a)}));else{let t=!1;n.map((n=>{const o=e.Yh[n];if(o.yaxisrange&&(t=s>o.yaxisrange[1]&&s<o.yaxisrange[0]),o.zoomstatus&&t){const t=i.select(`.yzoom-${o.yaxisTag}`).property("__zoom");(0,e.rk)(o.yscaleTag,{yzoomtransform:t}),g(o,a)}}))}}})();var n=s.v0,o=s.SA,l=s.Pr,r=s.Wi,c=s.$2,g=s.TC;export{n as UpdatePlotInfo,o as UpdateXscaleconfig,l as UpdateYscaleconfig,r as drawXaxis,c as drawYaxis,g as intialRendorAxis};
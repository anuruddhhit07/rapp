import*as t from"d3";var e={126:(t,e,a)=>{a.d(e,{Gi:()=>r}),a(507);let r=a(625).O1;new Set,new Set,new Set,new Set},625:(t,e,a)=>{a.d(e,{O1:()=>r});const r={timestamp:[],xindex:[],open:[],high:[],low:[],close:[],volume:[]}},507:(e,a,r)=>{var l,s;e.exports=(l={line:()=>t.line,select:()=>t.select,selectAll:()=>t.selectAll},s={},r.d(s,l),s)}},a={};function r(t){var l=a[t];if(void 0!==l)return l.exports;var s=a[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var l={};(()=>{r.d(l,{$M:()=>b,D1:()=>f,Dr:()=>o,Ej:()=>w,Gu:()=>$,Ip:()=>c,Iv:()=>i,L3:()=>m,R7:()=>u,RJ:()=>d,U4:()=>y,a:()=>n,bZ:()=>s,gl:()=>g,lo:()=>a,xI:()=>h,xR:()=>x,y7:()=>p});var t=r(507),e=r(126);function a(t,e){const a=t.append("g");a.attr("class",e);let r=null;return a.drawBorder=function(t,l,s,n,i,c,o,p,h){return r=this.append("rect").attr("class",`${e}-border`).attr("x",t).attr("y",l).attr("width",s).attr("height",n).attr("opacity",p).attr("fill",o).style("stroke",i).style("stroke-width",c),h&&a.append("use").attr("xlink:href","#zoomout").attr("width",s).attr("height",n).attr("x",0).attr("y",0).attr("pointer-events","none"),this},a.importData=function(t){return this.selectAll("rect").data(t).enter().append("rect").attr("class",`${e}-data`).attr("x",((t,e)=>30*e)).attr("y",0).attr("width",20).attr("height",(t=>t.value)).style("fill","steelblue"),this},a.translate=function(t,e){return this.attr("transform",`translate(${t},${e})`),this},a.insertHTML=function(t){return this.selectAll(`.${e}-html`).remove(),this.append("g").attr("class",`${e}-html`).html(t),this},a.onEvent1=function(t,e){return this.on(t,(function(t,a){return e.call(this,t,a)})),this},a.addIconImageToRect=function(t){if(!r)throw new Error("No rectangle found. Please draw a border first.");return this.append("foreignObject").attr("width",r.attr("width")).attr("height",r.attr("height")).attr("x",r.attr("x")).attr("y",r.attr("y")).append("xhtml:div").html(t).style("width","100%").style("height","100%").style("display","flex").style("justify-content","center").style("align-items","center"),this},a}function s(t,e,a){const{x:r,y:l,width:s,height:n}=a,i=t.append("g");e.forEach(((t,e)=>{i.append("use").attr("xlink:href",`#${t}`).attr("width",s).attr("height",n).attr("x",e*s).style("fill","red")}))}function n(t,e,a){const{x:r,y:l,width:s,height:n}=a,i=t.append("g").append("svg").attr("x",r).attr("y",l).attr("width",s*e.length).attr("height",n);e.forEach(((t,e)=>{i.append("use").attr("xlink:href",`#${t}`).attr("width",s).attr("height",n).attr("x",e*s).style("fill","red")}))}function i(t,e){const a=t.append("g");return a.attr("class",e),a.drawBorder=function(t,a,r,l,s,n,i,c){return this.append("rect").attr("class",`${e}-border`).attr("x",t).attr("y",a).attr("width",r).attr("height",l).attr("opacity",c).attr("fill",i).style("stroke",s).style("stroke-width",n),this},a.importData=function(t){return this.selectAll("rect").data(t).enter().append("rect").attr("class",`${e}-data`).attr("x",((t,e)=>30*e)).attr("y",0).attr("width",20).attr("height",(t=>t.value)).style("fill","steelblue"),this},a.translate=function(t,e){return this.attr("transform",`translate(${t},${e})`),this},a.insertHTML=function(t){return this.selectAll(`.${e}-html`).remove(),this.append("g").attr("class",`${e}-html`).html(t),this},a.onEvent1=function(t,e){return this.on(t,(function(t,a){return e.call(this,t,a)})),this},a}function c(t,e,a,r,l,s){let n=t.select("defs");n.empty()&&(n=t.append("defs"));const i=n.append("clipPath").attr("id",e).attr("class","clipplot");return i.append("rect").attr("x",a).attr("y",r).attr("width",l).attr("height",s).style("fill","steelblue"),i}function o(t,e){let a=t.select("defs");a.empty()&&(a=t.append("defs")),a.html(e)}function p(t,e){let a=t.select("defs");a.empty()&&(a=t.append("defs")),Object.entries(e).forEach((([t,e])=>{a.append("g").html(e)}))}function h(e,a){const r=e.append("g");let l;return r.attr("class",a),r.translate=function(t,e){return this.attr("transform",`translate(${t},${e})`),this},r.drawBorder=function(t,e,r,l,s,n,i,c){return this.append("rect").attr("class",`${a}-border`).attr("x",t).attr("y",e).attr("width",r).attr("height",l).attr("opacity",c).attr("fill",i).style("stroke",s).style("stroke-width",n),this},r.createSquaresHorizontally=function(t,e,s,n=void 0,i=void 0,c){return l=Array.from({length:t},((t,r)=>({x:r*(e+s),y:0,size:e,id:i?i[r]:"no-idset",class:`${a}-square`,pressstate:n?n[r]:void 0,svgicon:c?c[r]:"square"}))),this.selectAll("rect").data(l).enter().append("rect").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.size)).attr("height",(t=>t.size)).attr("id",(t=>t.id)).attr("class",(t=>t.class)).attr("opacity",.2).style("fill",(t=>void 0===t.pressstate?"gray":t.pressstate?"green":"steelblue")).style("stroke-width","2px"),r.selectAll("use").data(l).enter().append("use").attr("xlink:href",(t=>void 0===t.svgicon?"#symbol1":`#${t.svgicon}`)).attr("width",(t=>t.size)).attr("height",(t=>t.size)).attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("id",(t=>`svg${t.id}`)).style("fill",(t=>void 0===t.pressstate?"gray":t.pressstate?"green":"red")).attr("pointer-events","none"),this},r.attachClickEvent=function(e){return this.selectAll("rect").on("click",(function(a){const r=t.select(this),s=r.attr("id"),n=r.attr("class"),i=l.findIndex((t=>t.id===s));-1!==i&&(void 0!==l[i].pressstate&&(l[i].pressstate=!l[i].pressstate,r.style("fill",l[i].pressstate?"green":"steelblue"),t.selectAll(`#svg${s}`).style("fill",l[i].pressstate?"green":"red")),e(s,n,l[i].pressstate))})),this},r}function d(t,e,a,r,l){t.append("line").attr("x1",e).attr("y1",a).attr("x2",r).attr("y2",l)}function u(t,e,a,r,l){return t.append("rect").attr("x",e).attr("y",a).attr("width",r).attr("height",l)}function y(e,a,r,l,s,n,i,c){const o=t.line().x(((t,e)=>l(a[e]))).y(((t,e)=>s(r[e])));e.append("path").datum(r).attr("class",`all allplot lineplot linePlot-${n}`).attr("clip-path",`url(#clip-${i})`).attr("fill","none").attr("stroke",c).attr("stroke-width",2).attr("d",o)}function f(t,e,a,r,l,s,n,i,c){const o=r(e[1])-r(e[0]);t.selectAll(".bar").data(a).enter().append("rect").attr("class",`all allplot barplot barplot-${s}`).attr("clip-path",`url(#clip-${n})`).attr("x",((t,a)=>r(e[a])-o/4)).attr("y",(t=>l(t))).attr("width",o/2).attr("height",(t=>i[0]-l(t))).attr("fill",c)}function x(e,a,r,l,s,n){a.forEach(((a,i)=>{const c=a.x.reduce(((t,e)=>t+e),0)/a.x.length,o=a.y.reduce(((t,e)=>t+e),0)/a.y.length,p=t.line().x(((t,e)=>r(a.x[e]))).y(((t,e)=>l(a.y[e])));e.append("path").datum(a.y).attr("class",`all allplot multilineplot multilineplot-${a.label}`).attr("clip-path",`url(#clip-${s})`).attr("fill","none").attr("stroke",n).attr("stroke-width",1).attr("d",p),e.append("text").attr("x",r(c)).attr("y",l(o)-10).attr("fill",n).attr("class",`all multilineplot avg-label-${a.label}`).text(`${a.label}`)}))}function g(t,e,a,r,l,s,n,i,c){const o=r(e[1])-r(e[0]),p=Object.keys(a).length,h=o-.2*o,d=h/p;Object.keys(a).forEach(((o,u)=>{const y=a[o];t.selectAll(`.bar-${o}`).data(y).enter().append("rect").attr("class",`all allplot mulitbarplot mulitbarplot-${s} bar-${o}`).attr("clip-path",`url(#clip-${n})`).attr("x",((t,a)=>r(e[a])-h/2+u*d+(h-d*p)/2)).attr("y",(t=>l(t))).attr("width",d).attr("height",(t=>i[0]-l(t))).attr("fill",c[o])}))}function b(t,e,a,r,l,s,n,i,c,o){const p=n(1)-n(0),h=e,d=t.selectAll(".wickplot").data(h),u=t.selectAll(".candleplot").data(h);d.enter().append("line").attr("class",`all ohlcplot wickplot wickplot-${c}`).attr("clip-path",`url(#clip-${o})`).merge(d).attr("x1",((t,a)=>n(e[a]))).attr("y1",((t,e)=>i(r[e]))).attr("x2",((t,a)=>n(e[a]))).attr("y2",((t,e)=>i(l[e]))).attr("stroke","black").attr("stroke-width",1),d.exit().remove(),u.enter().append("rect").attr("class",`all ohlcplot candleplot candleplot-${c}`).attr("clip-path",`url(#clip-${o})`).merge(u).attr("x",((t,a)=>n(e[a])-p/4)).attr("y",((t,e)=>i(Math.max(a[e],s[e])))).attr("width",p/2).attr("height",((t,e)=>0==Math.abs(i(a[e])-i(s[e]))?.001*i(s[e]):Math.abs(i(a[e])-i(s[e])))).attr("fill",((t,e)=>a[e]>s[e]?"red":"green")).attr("stroke","black").attr("stroke-width",1),u.exit().remove()}function w(e,a,r){const l=[];a.forEach((e=>{const a=t.line().x((t=>t.x1)).y((t=>t.y1));l.push(a)})),a.forEach(((t,a)=>{e.append("path").datum([t]).attr("class",`all multiline multiline-line multiline-${r}`).attr("d",l[a]).attr("stroke",t.color).attr("stroke-width",2).attr("fill","none")})),a.forEach((t=>{e.append("text").attr("class",`all multiline multiline-label multiline-label-${r}`).attr("x",(t.x1+t.x2)/2).attr("y",(t.y1+t.y2)/2).text(t.label).attr("fill",t.color).attr("text-anchor","middle")}))}function m(t,e,a,r,l,s,n){t.selectAll(".scatter-point").data(e).enter().append("circle").attr("class",` all scatterplot scatter-point  scatter-point-${l}`).attr("clip-path",`url(#clip-${s})`).attr("cx",(t=>a(t.xData))).attr("cy",(t=>r(t.yData))).attr("r",(t=>t.size)).attr("fill",(t=>t.color)).attr("stroke","none"),n&&t.selectAll(".scatter-label").data(e).enter().append("text").attr("class",`all scatterplot scatter-label scatter-label-${l}`).attr("clip-path",`url(#clip-${s})`).attr("x",(t=>a(t.xData)+5)).attr("y",(t=>r(t.yData)-5)).text((t=>t.label)).attr("fill","black").style("font-size","10px")}function $(t,a,r,l,s,n){const i=.01,c=t.selectAll(".backtestplot").data(a);c.enter().append("path").attr("class",`all backtestplot backtestplot-${s}`).attr("clip-path",`url(#clip-${n})`).attr("d",(t=>{const a=r(t.index),s=t.index,n=e.Gi.low[s],c=e.Gi.high[s];return"trigger"===t.buyorsell||"PatternBaseIndex"===t.buyorsell?`M${a-8},${l(n-n*i)-8} h16 v16 h-16 Z`:"buy"===t.buyorsell?`M${a},${l(n-n*i)-8} l8,16 l-16,0 Z`:"sell"===t.buyorsell?`M${a},${l(c+c*i)+8} l8,-16 l-16,0 Z`:null})).attr("fill",(t=>"trigger"===t.buyorsell?"blue":"buy"===t.buyorsell?"cyan":"sell"===t.buyorsell?t.pnl&&t.pnl>0?"green":"red":"PatternBaseIndex"===t.buyorsell?"yellow":"brown")).attr("stroke","black").attr("stroke-width",1),c.exit().remove()}})();var s=l.xR,n=l.bZ,i=l.a,c=l.Ip,o=l.lo,p=l.RJ,h=l.xI,d=l.R7,u=l.Dr,y=l.y7,f=l.Gu,x=l.D1,g=l.$M,b=l.U4,w=l.gl,m=l.Ej,$=l.L3,v=l.Iv;export{s as DrawMultilineonSVG,n as appendSvgElementsArray,i as appendSvgElementsArray1,c as createClipPath,o as createGroupAdv,p as createLine,h as createMultipleSqure,d as createRect,u as createSVGDefs2,y as createSVGDefs3,f as drawBacktestPlotOnSVG,x as drawBarChartOnSVG,g as drawCandlestickOnSVG,b as drawLineOnSVG,w as drawMultiBarChartOnSVG,m as drawMultipleLineChartOnSVG,$ as drawScatterPlotOnSVG,v as enhanceGroup};